# ==============================================================================
# ADMIN PORTAL ENVIRONMENT CONFIGURATION
# ==============================================================================
# This file documents all environment variables required for the admin portal.
# Copy this file to .env.local and fill in the values.
#
# @see ADR-001: Backend Authority
# @see ADR-003: Infrastructure & DNS Strategy
# @see ADR-004: Domain & Cookie Strategy
# ==============================================================================

# ------------------------------------------------------------------------------
# Supabase Configuration
# ------------------------------------------------------------------------------
# These are PUBLIC keys - safe to expose in the browser.
# The secret/service role key should NEVER be used in frontend apps.

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# ------------------------------------------------------------------------------
# Application URLs (ADR-003)
# ------------------------------------------------------------------------------
# Used for OAuth redirects, email links, and CORS configuration.

# Local Development
NEXT_PUBLIC_APP_URL=http://localhost:3002
NEXT_PUBLIC_MAIN_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:4000

# Production (uncomment for deployment)
# NEXT_PUBLIC_APP_URL=https://admin.thebazaar.co.ke
# NEXT_PUBLIC_MAIN_APP_URL=https://www.thebazaar.co.ke
# NEXT_PUBLIC_API_URL=https://api.thebazaar.co.ke

# ------------------------------------------------------------------------------
# Server-Side Only (API Routes)
# ------------------------------------------------------------------------------
# These keys are used by Next.js API routes (server-side only).
# They are NEVER exposed to the client/browser.

# Service Role Key - Required for creating admin staff accounts
# This is used ONLY in /api/admin/* routes
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ------------------------------------------------------------------------------
# Admin Portal Specific Settings
# ------------------------------------------------------------------------------

# Session timeout in minutes (default: 30)
NEXT_PUBLIC_SESSION_TIMEOUT=30

# Enable audit logging (always true in production)
NEXT_PUBLIC_ENABLE_AUDIT_LOGGING=true

# ==============================================================================
# SECURITY NOTES
# ==============================================================================
# 
# ⚠️  SUPABASE_SERVICE_ROLE_KEY is used ONLY in server-side API routes
# ❌ DO NOT add PAYSTACK_SECRET_KEY - admin portal does not process payments
# ❌ DO NOT enable OAuth for admin accounts - Email/Password ONLY
# ❌ DO NOT expose service role key to client-side code
# 
# ✅ All payment operations go through backend-api
# ✅ All sensitive operations go through backend-api
# ✅ Frontend only uses public/anon keys
# ✅ All admin actions are logged for audit trail
#
# ==============================================================================
