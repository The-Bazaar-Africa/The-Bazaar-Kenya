# =============================================================================
# THE BAZAAR — Backend API Environment Variables (EXAMPLE)
# =============================================================================
# Copy this file to `.env.local` and fill in real values.
# NEVER commit `.env.local` to version control.
# =============================================================================


# -----------------------------------------------------------------------------
# Application Runtime
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=the-bazaar-backend-api
APP_ENV=local
PORT=4000


# -----------------------------------------------------------------------------
# Supabase Configuration
# -----------------------------------------------------------------------------
# Get from: https://supabase.com/dashboard/project/<project>/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# SECURITY:
# - This key has FULL database access
# - Backend-only usage
# - NEVER expose to frontend apps


# -----------------------------------------------------------------------------
# Authentication / Tokens
# -----------------------------------------------------------------------------
JWT_SECRET=replace-with-long-random-string
JWT_EXPIRES_IN=15m

REFRESH_TOKEN_SECRET=replace-with-another-long-random-string
REFRESH_TOKEN_EXPIRES_IN=30d


# -----------------------------------------------------------------------------
# Paystack (Payments) — ADR-002
# -----------------------------------------------------------------------------
# Get from: https://dashboard.paystack.com/#/settings/developer
PAYSTACK_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxx
PAYSTACK_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxx

# SECURITY (CRITICAL):
# - PAYSTACK_SECRET_KEY is backend-only — NEVER expose to any frontend
# - PAYSTACK_WEBHOOK_SECRET is REQUIRED to verify incoming webhook events
# - DO NOT add PAYSTACK_PUBLIC_KEY here — it belongs in main-app only
# - DO NOT prefix any Paystack key with NEXT_PUBLIC_ in this file
#
# Frontend Interaction Model:
# - main-app: Gets public key from its own .env (NEXT_PUBLIC_PAYSTACK_PUBLIC_KEY)
# - admin-portal: Zero Paystack keys
# - vendor-portal: Zero Paystack keys
# - backend-api: Secret key only (this file)

# Paystack Dashboard Configuration:
# - Test Callback URL: https://www.thebazaar.co.ke/checkout/callback
# - Test Webhook URL:  https://api.thebazaar.co.ke/payments/webhook


# -----------------------------------------------------------------------------
# URLs / Frontend Portals — ADR-003
# -----------------------------------------------------------------------------
# Local Development:
BASE_API_URL=http://localhost:4000

FRONTEND_MAIN_URL=http://localhost:3000
FRONTEND_VENDOR_URL=http://localhost:3001
FRONTEND_ADMIN_URL=http://localhost:3002

# Production:
# BASE_API_URL=https://api.thebazaar.co.ke
# FRONTEND_MAIN_URL=https://www.thebazaar.co.ke
# FRONTEND_VENDOR_URL=https://vendors.thebazaar.co.ke
# FRONTEND_ADMIN_URL=https://admin.thebazaar.co.ke


# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Local Development:
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:3002

# Production:
# CORS_ORIGIN=https://www.thebazaar.co.ke,https://vendors.thebazaar.co.ke,https://admin.thebazaar.co.ke


# -----------------------------------------------------------------------------
# Email / Notifications (Optional but Expected)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.yourprovider.com
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=your-smtp-password
EMAIL_FROM=no-reply@thebazaar.co.ke


# -----------------------------------------------------------------------------
# Logging & Observability
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
ENABLE_REQUEST_LOGGING=true

# Optional (later):
# SENTRY_DSN=
# OTEL_EXPORTER_OTLP_ENDPOINT=


# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_VENDOR_PAYOUTS=true
ENABLE_SUBSCRIPTIONS=false
